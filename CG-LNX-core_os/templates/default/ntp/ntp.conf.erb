# This file generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten
tinker panic 0

#
# NTP configuration file (ntp.conf)
#
<% node['CG-LNX-core_os']['ntp']['servers'].each do |ts, ts_ip| -%>
server <%= ts %> minpoll 4 maxpoll 8
<% end -%>

#
# Miscellaneous stuff
#
driftfile <%= node['CG-LNX-core_os']['ntp']['driftfile'] %> 	# path for drift file

#
# Authentication stuff
#
keys /etc/ntp/keys              # path for keys file
trustedkey 7                    # define trusted keys
requestkey 7                    # key for accessing server variables
controlkey 7                    # key for accessing server variables

#
# restrict access to everything but time servers
#
restrict 0.0.0.0 mask 0.0.0.0 ignore    	# block off everything
restrict 127.0.0.1 mask 255.255.255.255 	# allow localhost
<% node['CG-LNX-core_os']['ntp']['servers'].each do |ts, ts_ip| -%>
restrict <%= ts_ip %> mask 255.255.255.255      # allow <%= ts %>
<% end -%>
